(this["webpackJsonpecho-messenger-client"]=this["webpackJsonpecho-messenger-client"]||[]).push([[0],{60:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(28),s=n.n(r),i=n(11),a=n(2),o=n(10),l=n.n(o),u=n(12),j=n(18),h=n(13),d=n.n(h),b=n(1),O=Object(c.createContext)(),x=function(e){var t=Object(c.useState)(null),n=Object(j.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)(0),a=Object(j.a)(i,2),o=a[0],h=a[1],x=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/current-user");case 2:null===(t=e.sent).data?s(null):""===t.data?(s(!1),console.log("User is logged out")):""!==t.data&&(s(!0),console.log("User is logged in")),h(t.data.credits);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)(O.Provider,{value:{isAuth:r,fetchUser:x,credits:o},children:e.children})},p=n(29),f=n.n(p),v=function(){var e=Object(c.useContext)(O),t=(e.isAuth,e.fetchUser),n=function(){var e=Object(u.a)(l.a.mark((function e(n){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/stripe",n);case 2:c=e.sent,console.log(c),t();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)(f.a,{name:"Echo",description:"5 credits for $5",amount:500,token:function(e){return n(e)},stripeKey:"pk_test_51IOiq9I6r4UAGMypznUebzIpVWqrRiqBgFaIO1sno59kSKnLElhv3rKmC2jZ7nwtNOm3RussvaICYhMA08Nl0SpO00x8nltVVw",children:Object(b.jsx)("button",{className:"btn",children:"Add Credits"})})},g={margin:"0 10px"},m=function(){var e=Object(c.useContext)(O),t=e.isAuth,n=e.fetchUser,r=e.credits;Object(c.useEffect)((function(){n()}),[]);return Object(b.jsx)("div",{children:Object(b.jsx)("nav",{children:Object(b.jsxs)("div",{className:"nav-wrapper",children:[t?Object(b.jsx)(i.b,{to:"/surveys",className:"left brand-logo",children:"Echo"}):Object(b.jsx)(i.b,{to:"/",className:"left brand-logo",children:"Echo"}),Object(b.jsx)("div",{className:"right"}),Object(b.jsx)("ul",{className:"right",children:function(){switch(t){case null:return;case!1:return Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:"/auth/google",children:"Login w/Google"})});default:return[Object(b.jsx)("li",{children:Object(b.jsx)(v,{})},"1"),Object(b.jsxs)("li",{style:g,children:["Credits:",r]},"2"),Object(b.jsx)("li",{children:Object(b.jsx)("a",{href:"/api/logout",children:"Logout"})},"3")]}}()})]})})})},y={textAlign:"center"},w=function(){return Object(b.jsxs)("div",{style:y,children:[Object(b.jsx)("h1",{children:"Echo messenger"}),Object(b.jsx)("h5",{children:"Collect feedback from your customers"})]})},k=function(){return Object(b.jsx)("h1",{children:"Surveys"})};var N=function(){return Object(b.jsx)("div",{className:"container",children:Object(b.jsx)(i.a,{children:Object(b.jsxs)("div",{children:[Object(b.jsx)(m,{}),Object(b.jsx)(a.a,{exact:!0,path:"/",component:w}),Object(b.jsx)(a.a,{exact:!0,path:"/surveys",component:k})]})})})};s.a.render(Object(b.jsx)(x,{children:Object(b.jsx)(N,{})}),document.querySelector("#root")),console.log("Stripe key is:","pk_test_51IOiq9I6r4UAGMypznUebzIpVWqrRiqBgFaIO1sno59kSKnLElhv3rKmC2jZ7nwtNOm3RussvaICYhMA08Nl0SpO00x8nltVVw"),console.log("Enviroment key is:","production")}},[[60,1,2]]]);
//# sourceMappingURL=main.0bc7c818.chunk.js.map